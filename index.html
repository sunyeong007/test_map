<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>여러개 마커에 이벤트 등록하기1</title>
    
</head>
<body>
<div id="map" style="width:100%;height:350px;"></div>

<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=812b2ec34472040ba9cd7aa33219aa3b"></script>
<script>
var mapContainer = document.getElementById('map'), // 지도를 표시할 div  
    mapOption = { 
        center: new kakao.maps.LatLng(37.58243228921183, 126.98364578216183), // 지도의 중심좌표
        level: 3 // 지도의 확대 레벨
    };

var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다
 
// 마커를 표시할 위치와 내용을 가지고 있는 객체 배열입니다 
var positions = [{"title":"북촌문화요일","lat":37.5790313,"lng":126.9864082},
{"title":"여름한옥","lat":37.579849,"lng":126.968176},
{"title":"ソフィア ゲストハウス","lat":37.578866,"lng":126.981786},
{"title":"北村共同??廊","lat":37.5802946,"lng":126.9876761},
{"title":"????工房 「??サラン」","lat":37.582485,"lng":126.985498},
{"title":"??山房","lat":37.5803409,"lng":126.986349},
{"title":"笑談客棧","lat":37.5752477,"lng":126.9911225},
{"title":"三??","lat":37.5970377,"lng":126.9841211},
{"title":"??山房","lat":37.5950128,"lng":126.9948259},
{"title":"金箔作坊“金箔宴”","lat":37.5825812,"lng":126.9861789},
{"title":"どうし","lat":37.5790313,"lng":126.9864082},
{"title":"서울무형문화재 교육전시장","lat":37.5787506,"lng":126.9857259},
{"title":"オブスゲストハウス","lat":37.57729,"lng":127.037142},
{"title":"カフェ(嘉?)民?博物館","lat":37.5820903,"lng":126.9856716},
{"title":"嘉會洞白麟濟家","lat":37.580642,"lng":126.9840665},
{"title":"Doo ゲストハウス","lat":37.58189,"lng":126.986288},
{"title":"ヨンダン&#12539;ゲストハウス","lat":37.5824775,"lng":126.9870057},
{"title":"WWOOF Korea Guesthouse","lat":37.579688,"lng":126.987335},
{"title":"スンヒョネジプ","lat":37.5829268,"lng":126.9859285},
{"title":"マンヘダン","lat":37.581926,"lng":126.9866905},
{"title":"창덕궁 소담","lat":37.5752477,"lng":126.9911225},
{"title":"문 게스트하우스","lat":37.5761966,"lng":126.9887176},
{"title":"도원정 힐링하우스","lat":37.5779888,"lng":126.9810674},
{"title":"CHIWOONJUNG","lat":37.5775143,"lng":126.9812131},
{"title":"Dongji","lat":37.5790313,"lng":126.9864082},
{"title":"Ikseon-dong","lat":37.574313,"lng":126.989756},
{"title":"한옥체험 풍경","lat":37.585671,"lng":126.997194},
{"title":"서울이야기 한옥","lat":37.577186,"lng":126.984635},
{"title":"무위","lat":37.583416,"lng":126.987665},
{"title":"석이한옥","lat":37.54593,"lng":126.945419},
{"title":"소담스테이","lat":37.548094,"lng":126.955926},
{"title":"서울 성북 홈스테이","lat":37.602136,"lng":127.040366},
{"title":"돌마","lat":37.55759,"lng":126.920087},
{"title":"게스트하우스 바리","lat":37.577229,"lng":126.970479},
{"title":"전통발효공방 '빚담'","lat":37.5822725,"lng":126.9854868},
{"title":"Seochon Guesthouse","lat":37.5790608,"lng":126.9706563},
{"title":"Xiwoo","lat":37.582706,"lng":126.9694841},
{"title":"Hue guest house","lat":37.5800691,"lng":126.9845034},
{"title":"Dahmsojung","lat":37.5813002,"lng":126.9843271},
{"title":"Si Eun Jae","lat":37.5736822,"lng":126.9871792},
{"title":"Sodam Hanokstay","lat":37.5752477,"lng":126.9911225},
{"title":"Seoneum-jae","lat":37.5849347,"lng":126.9855446},
{"title":"goi","lat":37.581475,"lng":126.984113},
{"title":"Hanok Guesthouse 201","lat":37.5804605,"lng":126.9853755},
{"title":"Youngrakjae","lat":37.5802907,"lng":126.9675599},
{"title":"Sopoong Guest House","lat":37.5790314,"lng":126.9732855},
{"title":"Woori Bitkkal Workshop","lat":37.582245,"lng":126.984039},
{"title":"Traditional Wrapping Cloth","lat":37.582761,"lng":126.987133},
{"title":"Hong Byeokheon Hanji Doll","lat":37.583256,"lng":126.989288},
{"title":"Suyeonsanbang","lat":37.5950128,"lng":126.9948259},
{"title":"Woori Bitkkal Workshop","lat":37.582245,"lng":126.984039},
{"title":"Bukchon Community Library","lat":37.5802946,"lng":126.9876761},
{"title":"Han Sangsoo Embroidery Workshop","lat":37.5827234,"lng":126.9856381},
{"title":"HongByeokheon Dakjongi Dolls Workshop","lat":37.5832449,"lng":126.9892891},
{"title":"Bukchon Chogo Workshop 'GODRATDOL'","lat":37.5818673,"lng":126.9835212},
{"title":"Traditional Wedding Wrapping Cloth","lat":37.5827435,"lng":126.9871323},
{"title":"Seoul Intangible Cultural Heritage Exhibition Hall","lat":37.5787506,"lng":126.9857259},
{"title":"Lacquer Studio","lat":37.5789135,"lng":126.9842361},
{"title":"Dakjongi Dolls Workshop","lat":37.5828614,"lng":126.9875417},
{"title":"Saeksil-moonyang-nubi Workshop","lat":37.5820903,"lng":126.9856716},
{"title":"翼善洞","lat":37.574313,"lng":126.989756},
{"title":"北村&#23486;&#39302;","lat":37.581282,"lng":126.986603},
{"title":"&#20044;布旅舍","lat":37.57729,"lng":127.037142},
{"title":"Bamboo Guesthouse","lat":37.58041,"lng":126.987825},
{"title":"Nam Hyun Dang","lat":37.574445,"lng":126.988155},
{"title":"Doo GuestHouse","lat":37.58189,"lng":126.986288},
{"title":"&#33714;塘&#23486;&#39302;","lat":37.5824775,"lng":126.9870057},
{"title":"唯&#30495;的家 (EUGENE’S HOUSE)","lat":37.590347,"lng":127.00022},
{"title":"Hanok Guesthouse 'Urijip Our Home'","lat":37.5790024,"lng":126.9860825},
{"title":"우리빛깔공방","lat":37.582245,"lng":126.984039},
{"title":"달집북촌","lat":37.5840969,"lng":126.983475},
{"title":"한옥지원센터","lat":37.5802677,"lng":126.9874783},
{"title":"금박공방 ‘금박연’","lat":37.5825812,"lng":126.9861789},
{"title":"두 한옥체험관","lat":37.5818847,"lng":126.986288},
{"title":"한상수자수공방","lat":37.5827234,"lng":126.9856381},
{"title":"북촌초고공방 고드랫돌","lat":37.5818673,"lng":126.9835212},
{"title":"북촌전통공예체험관","lat":37.5824447,"lng":126.9860245},
{"title":"북촌공예원","lat":37.5828614,"lng":126.9875417},
{"title":"가회 민화공방","lat":37.5820903,"lng":126.9856716},
{"title":"북촌마을서재","lat":37.5802946,"lng":126.9876761},
{"title":"제이에스하우스1","lat":37.595674,"lng":126.914197},
{"title":"북한산 둘레길 한옥","lat":37.641766,"lng":126.939112},
{"title":"혜화1938","lat":37.589766,"lng":126.998646},
{"title":"螺??漆","lat":37.582462,"lng":126.987049},
{"title":"KunDaeMunJip","lat":37.580004,"lng":126.987116},
{"title":"木工?工房","lat":37.5827482,"lng":126.9872681},
{"title":"北村文化中心","lat":37.5790313,"lng":126.9864082},
{"title":"Donglim Knot Workshop","lat":37.581761,"lng":126.985603},
{"title":"惟心堂","lat":37.58148,"lng":126.987021},
{"title":"생옻칠공방","lat":37.5789135,"lng":126.9842361},
{"title":"Gahoe Museum","lat":37.5820903,"lng":126.9856716},
{"title":"花??案??工房","lat":37.5820903,"lng":126.9856716},
{"title":"首?南山???院","lat":37.5588388,"lng":126.9940727},
{"title":"石波浪","lat":37.5991812,"lng":126.958681},
{"title":"北村文化 センタ?","lat":37.5790313,"lng":126.9864082},
{"title":"草藁工坊“?石”","lat":37.582114,"lng":126.983489}];

for (var i = 0; i < positions.length; i ++) {
    // 마커를 생성합니다
    var marker = new kakao.maps.Marker({
        map: map, // 마커를 표시할 지도
        position: positions[i].latlng // 마커의 위치
    });

    // 마커에 표시할 인포윈도우를 생성합니다 
    var infowindow = new kakao.maps.InfoWindow({
        content: positions[i].content // 인포윈도우에 표시할 내용
    });

    // 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다
    // 이벤트 리스너로는 클로저를 만들어 등록합니다 
    // for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
    kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
    kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
}

// 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
function makeOverListener(map, marker, infowindow) {
    return function() {
        infowindow.open(map, marker);
    };
}

// 인포윈도우를 닫는 클로저를 만드는 함수입니다 
function makeOutListener(infowindow) {
    return function() {
        infowindow.close();
    };
}

/* 아래와 같이도 할 수 있습니다 */
/*
for (var i = 0; i < positions.length; i ++) {
    // 마커를 생성합니다
    var marker = new kakao.maps.Marker({
        map: map, // 마커를 표시할 지도
        position: positions[i].latlng // 마커의 위치
    });

    // 마커에 표시할 인포윈도우를 생성합니다 
    var infowindow = new kakao.maps.InfoWindow({
        content: positions[i].content // 인포윈도우에 표시할 내용
    });

    // 마커에 이벤트를 등록하는 함수 만들고 즉시 호출하여 클로저를 만듭니다
    // 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
    (function(marker, infowindow) {
        // 마커에 mouseover 이벤트를 등록하고 마우스 오버 시 인포윈도우를 표시합니다 
        kakao.maps.event.addListener(marker, 'mouseover', function() {
            infowindow.open(map, marker);
        });

        // 마커에 mouseout 이벤트를 등록하고 마우스 아웃 시 인포윈도우를 닫습니다
        kakao.maps.event.addListener(marker, 'mouseout', function() {
            infowindow.close();
        });
    })(marker, infowindow);
}
*/
</script>
</body>
</html>
